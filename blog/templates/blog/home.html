{% extends "base.html" %}

{% load gravatar %}{% load static %}{% load custom_tags %}{% load permission_tags %}

{% block title %}Home{% endblock title %}

{% block intro %} {% include 'includes/_type.html' %} {% endblock %}

{% block content %}
  <h1 class="title">Articles</h1>

  {% if user|can:'create_post' %}
  
  <button class="btn btn-outline-info" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample" style="margin-top: -3rem">
    New post
  </button>
  <div class="collapse" id="collapseExample" style="margin-bottom: 0.2rem">
    <div class="card card-body">
      {% include "blog/includes/_new_post.html" %}
    </div>
  </div>

  
  
  {% endif %}



  {% for post in posts %}
  <div class="card mb-4">

    <img class="card-img-top" src="https://picsum.photos/750/300/?image={% random_int 1 1000 %}" alt="Card image cap">
    <div class="card-body">
      <h2 class="card-title">{{ post.title }}</h2>
      <h5 class="text-muted headline"><i>{{ post.headline }}</i></h5>
      <p class="card-text">{{ post.body | truncatewords_html:50 | safe}}</p>
      <a href="{% url 'post_detail' post.id %}" class="btn btn-outline-primary">
        <i class="fa fa-angle-double-right" aria-hidden="true"></i>
        <span style="margin-left: 0.5rem">Read More</span>
      </a>
    </div>

    <div class="d-inline p-2 card-footer text-muted">
      {{ post.date }} <strong>by</strong>
      <a href="#">
        <img style="margin-left: 0.5rem" src="{{ post.author|gravatar }}" class="w-18 rounded">
        {{ post.author }}
      </a>
    </div>

  </div>
  {% endfor %}




  {% include "includes/_pagination.html" %}

{% endblock content %}

{% block javascript %}
  <script src="{% static 'js/type.js' %}"></script>
{% endblock javascript %}